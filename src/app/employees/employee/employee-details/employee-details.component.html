<div
    class="profile-overview"
    fxLayout="column"
    fxLayout.gt-sm="column"
    fxLayoutGap="32px"
>
    <mat-card>
        <mat-card-header>
            <mat-card-title>About</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div
                class="content"
                *ngIf="shortProfiles"
            >

                <div *ngIf="shortProfiles.length > 1; then multiple else single"></div>
                <ng-template #single>
                    <div
                        fxLayout="column"
                        fxLayout.gt-sm="row"
                        fxLayoutGap="5px"
                    >
                        <p>{{ shortProfiles[0]?.DescriptionDe }}</p>
                        <p>{{ shortProfiles[0]?.DescriptionEn }}</p>
                    </div>
                </ng-template>
                <ng-template #multiple>
                    <mat-accordion>
                        <mat-expansion-panel
                            *ngFor="let p of shortProfiles; first as isFirst"
                            [expanded]="isFirst"
                        >
                            <mat-expansion-panel-header>
                                <mat-panel-title>{{ p.Role }}</mat-panel-title>
                            </mat-expansion-panel-header>
                            <div
                                fxLayout="column"
                                fxLayout.gt-sm="row"
                                fxLayoutGap="12px"
                            >
                                <p>{{ p.DescriptionDe }}</p>
                                <p>{{ p.DescriptionEn }}</p>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </ng-template>
            </div>
        </mat-card-content>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-title>Projects</mat-card-title>
        </mat-card-header>
        <mat-card-content *ngIf="code">
            <div
                class="content"
                fxLayout="column"
           >
                <app-project-participation-table></app-project-participation-table>
                <img
                    class="project-graph"
                    fxFlexAlign="center"
                    src="http://localhost:41588/api/v1/employees/{{ code }}/utilization?width=1000&weeks=32&offset=0"
                >
            </div>
        </mat-card-content>
    </mat-card>

    <mat-card *ngIf="allSkills?.length > 0">
        <mat-card-header>
            <mat-card-title>Skills</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="content">
                <div
                    fxLayout="row"
                    fxLayoutGap="5px"
                >
                    <div
                        fxFlex
                        fxLayout="column"
                    >
                        <app-skill-list
                            [level]="1"
                            [allSkills]="allSkills"
                        ></app-skill-list>
                    </div>
                    <div
                        fxFlex
                        fxLayout="column"
                    >
                        <app-skill-list
                            [level]="2"
                            [allSkills]="allSkills"
                        ></app-skill-list>
                    </div>
                    <div
                        fxFlex
                        fxLayout="column"
                    >
                        <app-skill-list
                            [level]="4"
                            [allSkills]="allSkills"
                        ></app-skill-list>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>

    <div
        class="aside"
        fxFlex.gt-sm="320px"
    >
        <div class="heading">RECENT ACTIVITY</div>

        <div class="activity">
            <div
                class="event"
                fxLayout="row"
            >
                <div class="dot primary"></div>
                <div class="line"></div>
                <div class="info">
                    <div class="when">17 mins ago</div>
                    <div class="name">Called Jefferson</div>
                    <div class="description">
                        Jason called Jefferson about the meeting
                    </div>
                </div>
            </div>

            <div
                class="event"
                fxLayout="row"
            >
                <div class="dot accent"></div>
                <div class="line"></div>
                <div class="info">
                    <div class="when">54 mins ago</div>
                    <div class="name">New purchase</div>
                    <div class="description">Jason successfully purchased item #26</div>
                </div>
            </div>

            <div
                class="event"
                fxLayout="row"
            >
                <div class="dot primary"></div>
                <div class="line"></div>
                <div class="info">
                    <div class="when">2 hours ago</div>
                    <div class="name">Printed sales report</div>
                    <div class="description">Jason printed the sales report</div>
                </div>
            </div>

            <div
                class="event"
                fxLayout="row"
            >
                <div class="dot warn"></div>
                <div class="line"></div>
                <div class="info">
                    <div class="when">4 hours ago</div>
                    <div class="name">Created ticket</div>
                    <div class="description">
                        Jason created a new ticket about the design
                    </div>
                </div>
            </div>

            <div
                class="event"
                fxLayout="row"
            >
                <div class="dot accent"></div>
                <div class="line"></div>
                <div class="info">
                    <div class="when">5 hours ago</div>
                    <div class="name">New purchase</div>
                    <div class="description">Jason bought the elastic ui template</div>
                </div>
            </div>
        </div>

        <div
            class="footer"
            fxLayout="row"
            fxLayoutAlign="center center"
        >
            <button
                type="button"
                mat-button
            >
                LOAD MORE
            </button>
        </div>
    </div>
</div>
